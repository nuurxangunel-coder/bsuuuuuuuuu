<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BSU Chat - Bakƒ± D√∂vl…ôt Universiteti</title>
    <link rel="stylesheet" href="/styles.css">
</head>
<body>
    <!-- Login/Register Page -->
    <div id="auth-page" class="auth-page">
        <div class="auth-container">
            <div class="auth-header">
                <div class="logo-container">
                    <div class="logo-icon">üéì</div>
                </div>
                <h1>BSU Chat</h1>
                <p>Bakƒ± D√∂vl…ôt Universiteti</p>
            </div>

            <div class="auth-tabs">
                <button class="auth-tab active" data-tab="login">Giri≈ü</button>
                <button class="auth-tab" data-tab="register">Qeydiyyat</button>
                <button class="auth-tab" data-tab="admin">Admin Paneli</button>
            </div>

            <!-- Login Form -->
            <div id="login-form" class="auth-form active">
                <div class="form-group">
                    <label>Email</label>
                    <input type="email" id="login-email" placeholder="Email daxil edin">
                </div>
                <div class="form-group">
                    <label>≈ûifr…ô</label>
                    <input type="password" id="login-password" placeholder="≈ûifr…ô daxil edin">
                </div>
                <div id="login-verification" class="verification-section" style="display: none;">
                    <h3>Doƒürulama</h3>
                    <p class="verification-hint">∆èn azƒ± 2 sualƒ± d√ºzg√ºn cavablandƒ±rƒ±n</p>
                    <div id="login-questions"></div>
                </div>
                <button class="btn-primary" onclick="handleLogin()">Daxil ol</button>
                <div id="login-error" class="error-message"></div>
            </div>

            <!-- Register Form -->
            <div id="register-form" class="auth-form">
                <div class="form-group">
                    <label>Ad Soyad</label>
                    <input type="text" id="register-fullname" placeholder="Ad v…ô soyad daxil edin">
                </div>
                <div class="form-group">
                    <label>Telefon n√∂mr…ôsi</label>
                    <div class="phone-input">
                        <span class="phone-prefix">+994</span>
                        <input type="tel" id="register-phone" placeholder="XXXXXXXXX" maxlength="9">
                    </div>
                </div>
                <div class="form-group">
                    <label>Email</label>
                    <div class="email-input">
                        <input type="text" id="register-email-prefix" placeholder="istifadeci">
                        <span class="email-suffix">@bsu.edu.az</span>
                    </div>
                </div>
                <div class="form-group">
                    <label>≈ûifr…ô</label>
                    <input type="password" id="register-password" placeholder="≈ûifr…ô daxil edin">
                </div>
                <div class="form-group">
                    <label>Fak√ºlt…ô</label>
                    <select id="register-faculty">
                        <option value="">Fak√ºlt…ô se√ßin</option>
                        <option value="Mexanika-riyaziyyat fak√ºlt…ôsi">Mexanika-riyaziyyat fak√ºlt…ôsi</option>
                        <option value="T…ôtbiqi riyaziyyat v…ô kibernetika fak√ºlt…ôsi">T…ôtbiqi riyaziyyat v…ô kibernetika fak√ºlt…ôsi</option>
                        <option value="Fizika fak√ºlt…ôsi">Fizika fak√ºlt…ôsi</option>
                        <option value="Kimya fak√ºlt…ôsi">Kimya fak√ºlt…ôsi</option>
                        <option value="Biologiya fak√ºlt…ôsi">Biologiya fak√ºlt…ôsi</option>
                        <option value="Ekologiya v…ô torpaq≈ü√ºnaslƒ±q fak√ºlt…ôsi">Ekologiya v…ô torpaq≈ü√ºnaslƒ±q fak√ºlt…ôsi</option>
                        <option value="Coƒürafiya fak√ºlt…ôsi">Coƒürafiya fak√ºlt…ôsi</option>
                        <option value="Geologiya fak√ºlt…ôsi">Geologiya fak√ºlt…ôsi</option>
                        <option value="Filologiya fak√ºlt…ôsi">Filologiya fak√ºlt…ôsi</option>
                        <option value="Tarix fak√ºlt…ôsi">Tarix fak√ºlt…ôsi</option>
                        <option value="Beyn…ôlxalq m√ºnasib…ôtl…ôr v…ô iqtisadiyyat fak√ºlt…ôsi">Beyn…ôlxalq m√ºnasib…ôtl…ôr v…ô iqtisadiyyat fak√ºlt…ôsi</option>
                        <option value="H√ºquq fak√ºlt…ôsi">H√ºquq fak√ºlt…ôsi</option>
                        <option value="Jurnalistika fak√ºlt…ôsi">Jurnalistika fak√ºlt…ôsi</option>
                        <option value="ƒ∞nformasiya v…ô s…ôn…ôd menecmenti fak√ºlt…ôsi">ƒ∞nformasiya v…ô s…ôn…ôd menecmenti fak√ºlt…ôsi</option>
                        <option value="≈û…ôrq≈ü√ºnaslƒ±q fak√ºlt…ôsi">≈û…ôrq≈ü√ºnaslƒ±q fak√ºlt…ôsi</option>
                        <option value="Sosial elml…ôr v…ô psixologiya fak√ºlt…ôsi">Sosial elml…ôr v…ô psixologiya fak√ºlt…ôsi</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>D…ôr…ôc…ô</label>
                    <select id="register-degree">
                        <option value="">D…ôr…ôc…ô se√ßin</option>
                        <option value="Bakalavr">Bakalavr</option>
                        <option value="Magistr">Magistr</option>
                        <option value="Doktorantura">Doktorantura</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Kurs</label>
                    <select id="register-course">
                        <option value="">Kurs se√ßin</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Avatar se√ßin</label>
                    <div class="avatar-selection">
                        <div class="avatar-option" data-avatar="1">
                            <img src="/avatars/boy.png" alt="Oƒülan">
                        </div>
                        <div class="avatar-option" data-avatar="2">
                            <img src="/avatars/girl.png" alt="Qƒ±z">
                        </div>
                    </div>
                    <input type="hidden" id="register-avatar" value="">
                </div>
                <div id="register-verification" class="verification-section" style="display: none;">
                    <h3>Doƒürulama</h3>
                    <p class="verification-hint">∆èn azƒ± 2 sualƒ± d√ºzg√ºn cavablandƒ±rƒ±n</p>
                    <div id="register-questions"></div>
                </div>
                <button class="btn-primary" onclick="showVerification('register')">Qeydiyyatdan ke√ß</button>
                <div id="register-error" class="error-message"></div>
            </div>

            <!-- Admin Login Form -->
            <div id="admin-form" class="auth-form">
                <div class="form-group">
                    <label>ƒ∞stifad…ô√ßi adƒ±</label>
                    <input type="text" id="admin-username" placeholder="ƒ∞stifad…ô√ßi adƒ± daxil edin">
                </div>
                <div class="form-group">
                    <label>≈ûifr…ô</label>
                    <input type="password" id="admin-password" placeholder="≈ûifr…ô daxil edin">
                </div>
                <button class="btn-primary" onclick="handleAdminLogin()">Daxil ol</button>
                <div id="admin-error" class="error-message"></div>
            </div>
        </div>
    </div>

    <!-- Chat Page -->
    <div id="chat-page" class="chat-page" style="display: none;">
        <div class="chat-container">
            <!-- Sidebar -->
            <div class="chat-sidebar">
                <div class="sidebar-header">
                    <div class="logo-small">üéì</div>
                    <h2>BSU Chat</h2>
                </div>

                <div class="topic-of-day" id="topic-of-day" style="display: none;">
                    <div class="topic-icon">üìå</div>
                    <div class="topic-text"></div>
                </div>

                <div class="user-info">
                    <div class="user-avatar-container">
                        <img id="user-avatar" src="/avatars/boy.png" alt="Avatar">
                    </div>
                    <div class="user-details">
                        <div class="user-name" id="user-name"></div>
                        <div class="user-faculty" id="user-faculty"></div>
                        <div class="user-course" id="user-course"></div>
                    </div>
                    <button class="user-menu-btn" onclick="toggleUserMenu()">‚ãÆ</button>
                    <div class="user-menu" id="user-menu">
                        <button onclick="showEditProfile()">‚úèÔ∏è Profili d…ôyi≈üdir</button>
                        <button onclick="showRules()">üìã Qaydalar</button>
                        <button onclick="showAbout()">‚ÑπÔ∏è Haqqƒ±nda</button>
                        <button onclick="logout()">üö™ √áƒ±xƒ±≈ü</button>
                    </div>
                </div>

                <div class="faculties-list">
                    <h3>Fak√ºlt…ôl…ôr</h3>
                    <div id="faculties-container"></div>
                </div>
            </div>

            <!-- Main Chat Area -->
            <div class="chat-main">
                <div class="chat-header">
                    <h2 id="current-faculty-name">Fak√ºlt…ô se√ßin</h2>
                </div>

                <div class="messages-container" id="messages-container">
                    <div class="no-faculty-selected">
                        <div class="no-faculty-icon">üí¨</div>
                        <h3>Fak√ºlt…ô se√ßin</h3>
                        <p>S√∂hb…ôt…ô ba≈ülamaq √º√ß√ºn soldakƒ± siyahƒ±dan fak√ºlt…ôni se√ßin</p>
                    </div>
                </div>

                <div class="message-input-container" id="message-input-container" style="display: none;">
                    <input type="text" id="message-input" placeholder="Mesaj yazƒ±n...">
                    <button class="btn-send" onclick="sendMessage()">üì§</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Page -->
    <div id="admin-page" class="admin-page" style="display: none;">
        <div class="admin-container">
            <div class="admin-header">
                <h1>Admin Paneli</h1>
                <div class="admin-header-actions">
                    <span id="admin-username-display"></span>
                    <button class="btn-logout" onclick="logout()">√áƒ±xƒ±≈ü</button>
                </div>
            </div>

            <div class="admin-tabs">
                <button class="admin-tab active" onclick="showAdminTab('users')">üë• ƒ∞stifad…ô√ßil…ôr <span id="users-count"></span></button>
                <button class="admin-tab" onclick="showAdminTab('settings')">‚öôÔ∏è T…ônziml…ôm…ôl…ôr</button>
                <button class="admin-tab" onclick="showAdminTab('reported')">‚ö†Ô∏è ≈ûikay…ôtl…ôr</button>
                <button class="admin-tab" id="sub-admins-tab" onclick="showAdminTab('sub-admins')" style="display: none;">üë§ Alt Adminl…ôr</button>
            </div>

            <div class="admin-content">
                <!-- Users Tab -->
                <div id="admin-users" class="admin-tab-content active">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Ad Soyad</th>
                                <th>Email</th>
                                <th>Telefon</th>
                                <th>Fak√ºlt…ô</th>
                                <th>D…ôr…ôc…ô</th>
                                <th>Kurs</th>
                                <th>Status</th>
                                <th>∆èm…ôliyyat</th>
                            </tr>
                        </thead>
                        <tbody id="users-table-body"></tbody>
                    </table>
                </div>

                <!-- Settings Tab -->
                <div id="admin-settings" class="admin-tab-content">
                    <div class="settings-section">
                        <h3>G√ºn√ºn M√∂vzusu</h3>
                        <textarea id="topic-input" rows="3" placeholder="G√ºn√ºn m√∂vzusunu daxil edin..."></textarea>
                        <button class="btn-save" onclick="saveTopic()">Yadda saxla</button>
                    </div>

                    <div class="settings-section">
                        <h3>Qaydalar</h3>
                        <textarea id="rules-input" rows="8" placeholder="Qaydalarƒ± daxil edin..."></textarea>
                        <button class="btn-save" onclick="saveRules()">Yadda saxla</button>
                    </div>

                    <div class="settings-section">
                        <h3>Haqqƒ±nda</h3>
                        <textarea id="about-input" rows="8" placeholder="Haqqƒ±nda m…ôlumatƒ± daxil edin..."></textarea>
                        <button class="btn-save" onclick="saveAbout()">Yadda saxla</button>
                    </div>

                    <div class="settings-section">
                        <h3>Filtr S√∂zl…ôri</h3>
                        <input type="text" id="filter-input" placeholder="S√∂zl…ôri verg√ºll…ô ayƒ±rƒ±n: s√∂z1, s√∂z2, s√∂z3">
                        <button class="btn-save" onclick="saveFilter()">Yadda saxla</button>
                    </div>

                    <div class="settings-section">
                        <h3>Mesaj Silinm…ô Vaxtƒ±</h3>
                        <div class="time-settings">
                            <div>
                                <label>Qrup mesajlarƒ± (saat):</label>
                                <input type="number" id="group-lifetime" min="1" max="168" value="2">
                            </div>
                            <div>
                                <label>≈û…ôxsi mesajlar (saat):</label>
                                <input type="number" id="private-lifetime" min="1" max="168" value="2">
                            </div>
                        </div>
                        <button class="btn-save" onclick="saveMessageLifetime()">Yadda saxla</button>
                    </div>
                </div>

                <!-- Reported Users Tab -->
                <div id="admin-reported" class="admin-tab-content">
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>Ad Soyad</th>
                                <th>Email</th>
                                <th>Fak√ºlt…ô</th>
                                <th>≈ûikay…ôt sayƒ±</th>
                                <th>Status</th>
                                <th>∆èm…ôliyyat</th>
                            </tr>
                        </thead>
                        <tbody id="reported-table-body"></tbody>
                    </table>
                </div>

                <!-- Sub Admins Tab -->
                <div id="admin-sub-admins" class="admin-tab-content">
                    <div class="sub-admin-form">
                        <h3>Yeni Admin ∆èlav…ô Et</h3>
                        <div class="form-inline">
                            <input type="text" id="new-admin-username" placeholder="ƒ∞stifad…ô√ßi adƒ±">
                            <input type="password" id="new-admin-password" placeholder="≈ûifr…ô">
                            <button class="btn-add" onclick="createSubAdmin()">∆èlav…ô et</button>
                        </div>
                    </div>
                    <table class="admin-table">
                        <thead>
                            <tr>
                                <th>ƒ∞stifad…ô√ßi adƒ±</th>
                                <th>Yaradƒ±lma tarixi</th>
                                <th>∆èm…ôliyyat</th>
                            </tr>
                        </thead>
                        <tbody id="sub-admins-table-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for Private Chat -->
    <div id="private-chat-modal" class="modal">
        <div class="modal-content private-chat-content">
            <div class="modal-header">
                <h3 id="private-chat-title"></h3>
                <button class="modal-close" onclick="closePrivateChat()">&times;</button>
            </div>
            <div class="private-messages-container" id="private-messages-container"></div>
            <div class="private-message-input">
                <input type="text" id="private-message-input" placeholder="Mesaj yazƒ±n...">
                <button class="btn-send" onclick="sendPrivateMessage()">üì§</button>
            </div>
        </div>
    </div>

    <!-- Modal for Edit Profile -->
    <div id="edit-profile-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Profili D…ôyi≈üdir</h3>
                <button class="modal-close" onclick="closeEditProfile()">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label>Ad Soyad</label>
                    <input type="text" id="edit-fullname">
                </div>
                <div class="form-group">
                    <label>Fak√ºlt…ô</label>
                    <select id="edit-faculty">
                        <option value="Mexanika-riyaziyyat fak√ºlt…ôsi">Mexanika-riyaziyyat fak√ºlt…ôsi</option>
                        <option value="T…ôtbiqi riyaziyyat v…ô kibernetika fak√ºlt…ôsi">T…ôtbiqi riyaziyyat v…ô kibernetika fak√ºlt…ôsi</option>
                        <option value="Fizika fak√ºlt…ôsi">Fizika fak√ºlt…ôsi</option>
                        <option value="Kimya fak√ºlt…ôsi">Kimya fak√ºlt…ôsi</option>
                        <option value="Biologiya fak√ºlt…ôsi">Biologiya fak√ºlt…ôsi</option>
                        <option value="Ekologiya v…ô torpaq≈ü√ºnaslƒ±q fak√ºlt…ôsi">Ekologiya v…ô torpaq≈ü√ºnaslƒ±q fak√ºlt…ôsi</option>
                        <option value="Coƒürafiya fak√ºlt…ôsi">Coƒürafiya fak√ºlt…ôsi</option>
                        <option value="Geologiya fak√ºlt…ôsi">Geologiya fak√ºlt…ôsi</option>
                        <option value="Filologiya fak√ºlt…ôsi">Filologiya fak√ºlt…ôsi</option>
                        <option value="Tarix fak√ºlt…ôsi">Tarix fak√ºlt…ôsi</option>
                        <option value="Beyn…ôlxalq m√ºnasib…ôtl…ôr v…ô iqtisadiyyat fak√ºlt…ôsi">Beyn…ôlxalq m√ºnasib…ôtl…ôr v…ô iqtisadiyyat fak√ºlt…ôsi</option>
                        <option value="H√ºquq fak√ºlt…ôsi">H√ºquq fak√ºlt…ôsi</option>
                        <option value="Jurnalistika fak√ºlt…ôsi">Jurnalistika fak√ºlt…ôsi</option>
                        <option value="ƒ∞nformasiya v…ô s…ôn…ôd menecmenti fak√ºlt…ôsi">ƒ∞nformasiya v…ô s…ôn…ôd menecmenti fak√ºlt…ôsi</option>
                        <option value="≈û…ôrq≈ü√ºnaslƒ±q fak√ºlt…ôsi">≈û…ôrq≈ü√ºnaslƒ±q fak√ºlt…ôsi</option>
                        <option value="Sosial elml…ôr v…ô psixologiya fak√ºlt…ôsi">Sosial elml…ôr v…ô psixologiya fak√ºlt…ôsi</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>D…ôr…ôc…ô</label>
                    <select id="edit-degree">
                        <option value="Bakalavr">Bakalavr</option>
                        <option value="Magistr">Magistr</option>
                        <option value="Doktorantura">Doktorantura</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Kurs</label>
                    <select id="edit-course">
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                    </select>
                </div>
                <button class="btn-primary" onclick="saveProfile()">Yadda saxla</button>
            </div>
        </div>
    </div>

    <!-- Modal for Rules -->
    <div id="rules-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üìã Qaydalar</h3>
                <button class="modal-close" onclick="closeRules()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="rules-content" class="content-display"></div>
            </div>
        </div>
    </div>

    <!-- Modal for About -->
    <div id="about-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>‚ÑπÔ∏è Haqqƒ±nda</h3>
                <button class="modal-close" onclick="closeAbout()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="about-content" class="content-display"></div>
            </div>
        </div>
    </div>

    <script src="https://cdn.socket.io/4.6.1/socket.io.min.js"></script>
    <script src="/app.js"></script>
</body>
</html>
